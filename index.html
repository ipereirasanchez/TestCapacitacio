<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Test</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="wrap">
    <div class="card" id="card-header">
      <h1>Test Capacitació</h1>
      <p class="muted" id="status">Cargando banco de preguntas…</p>
    </div>

    <!-- Barra de progreso (visible durante el test) -->
    <div id="prog-wrap" class="hidden">
      <div class="progress-container">
        <div id="pBar" class="progress-bar"></div>
      </div>
    </div>

    <!-- Pantalla: configuración -->
    <div class="card" id="screen-setup" style="margin-top:14px;">
      <h2>Configuración</h2>

      <div class="row">
        <div>
          <label for="mode">Modo</label>
          <select id="mode">
            <option value="themes">Modo 1: temas elegidos</option>
            <option value="all200">Modo 2: 200 de todo</option>
          </select>
        </div>

        <div id="nWrap">
          <label for="n">Número de preguntas (Modo 1)</label>
          <input id="n" type="number" min="1" value="20" />
        </div>
      </div>

      <div style="margin-top:12px;">
        <label for="topics">Temas (Ctrl/⌘ para multi-selección)</label>
        <select id="topics" multiple size="8"></select>
        <p class="muted" style="margin:8px 0 0 0;">En modo “200 de todo” esto se ignora.</p>
      </div>

      <div style="margin-top:12px;">
        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; font-weight: 500;">
          <input type="checkbox" id="examMode" style="width: auto; margin: 0;">
          <span><b>Modo Examen</b> (corrección solo al final)</span>
        </label>
      </div>

      <div class="row" style="margin-top:12px;">
        <button class="primary" id="startBtn">Empezar</button>
        <button class="success hidden" id="resumeBtn">Reanudar test anterior</button>
      </div>

      <div id="setupMsg" class="hint hidden"></div>
    </div>

    <!-- Pantalla: historial -->
    <div class="card" id="screen-history" style="margin-top:14px;">
      <h2>Historial de resultados</h2>
      <div id="historyTableContainer" style="overflow-x:auto;">
        <p class="muted">Aún no hay resultados registrados.</p>
      </div>
      <div class="row" style="margin-top:12px;">
        <button id="clearHistoryBtn" class="danger" style="min-width:auto; padding: 6px 12px; font-size: 0.8em;">Borrar
          historial</button>
      </div>
    </div>

    <!-- Pantalla: pregunta -->
    <div class="card hidden" id="screen-question" style="margin-top:14px;">
      <div class="topline">
        <div>
          <h2 id="qTitle">Pregunta</h2>
          <div class="muted" id="qMeta"></div>
        </div>
        <div class="muted" id="qCounter"></div>
      </div>

      <div style="margin-top:10px;" id="qText"></div>
      <div class="options" id="qOptions"></div>

      <div class="row" style="margin-top:12px;">
        <button class="info" id="hintBtn">Pista</button>
        <button class="primary" id="applyBtn">Aplicar selección</button>
        <button id="skipBtn">Siguiente sin contestar</button>
        <button class="success finish-test-btn">Finalizar test</button>
        <button class="danger" id="exitBtn1">Salir del test</button>
      </div>
      <div class="row" style="margin-bottom:12px;">
        <label for="jumpSelect">Ir a la pregunta</label>
        <select id="jumpSelect"></select>
      </div>

      <div id="hintBox" class="hint hidden"></div>
      <div id="qMsg" class="hint hidden"></div>
    </div>

    <!-- Pantalla: corrección -->
    <div class="card hidden" id="screen-feedback" style="margin-top:14px;">
      <h2 id="fTitle">Corrección</h2>
      <div class="muted" id="fMeta"></div>

      <div style="margin-top:10px;" id="fText"></div>
      <div class="options" id="fOptions"></div>

      <div id="fNorma" class="hint hidden"></div>

      <div class="row" style="margin-top:12px;">
        <button class="success" id="nextBtn">Siguiente pregunta</button>
        <button class="success finish-test-btn">Finalizar test</button>
        <button class="danger" id="exitBtn2">Salir</button>
      </div>
      <div id="fMsg" class="hint hidden"></div>
    </div>
    <!-- Pantalla: resumen -->
    <!-- Pantalla: resumen -->
    <div class="card hidden" id="screen-summary" style="margin-top:14px;">
      <h2>Resumen del test</h2>

      <p id="sumTime"></p>
      <p id="sumCorrect"></p>
      <p id="sumWrong"></p>
      <p id="sumSkipped"></p>

      <!-- Navegación por preguntas desde el resumen -->
      <div style="margin-top:12px;">
        <label for="sumJumpSelect">Revisar pregunta</label>
        <select id="sumJumpSelect"></select>
        <p class="muted" style="margin:8px 0 0 0;">
          Verde = correcta, rojo = incorrecta, sin icono = sin responder.
        </p>
      </div>

      <div class="row" style="margin-top:12px;">
        <button class="info" id="sumViewBtn">Ver corrección</button>
      </div>

      <div class="row" style="margin-top:12px;">
        <button class="info" id="reviewBtn">Repetir fallos</button>
        <button class="danger" id="backBtn">Volver al menú</button>
      </div>
    </div>
  </div>

  <script src="js/app.state.js"></script>
  <script src="js/app.utils.js"></script>
  <script src="js/app.dom.js"></script>
  <script src="js/app.render.js"></script>
  <script src="js/app.actions.js"></script>
  <script src="js/app.events.js"></script>
  <script src="js/app.init.js"></script>
</body>

</html>